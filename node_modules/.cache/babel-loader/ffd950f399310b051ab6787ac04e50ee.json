{"ast":null,"code":"import _objectWithoutProperties from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _defineProperty from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/aditioan/Documents/Goingmerry/hackernews-client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"/Users/aditioan/Documents/Goingmerry/hackernews-client/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { sortBy } from 'lodash';\nimport classNames from 'classnames';\nimport './App.css';\nvar DEFAULT_USER = 'jl';\nvar DEFAULT_HPP = '100';\nvar GET_USER_DATA = \"https://hacker-news.firebaseio.com/v0/user/\".concat(DEFAULT_USER, \".json\");\nvar PATH_SEARCH = '/search';\nvar PARAM_SEARCH = 'query=';\nvar PARAM_PAGE = 'page=';\nvar PARAM_HPP = 'hitsPerPage=';\nvar SORTS = {\n  NONE: function NONE(list) {\n    return list;\n  },\n  TITLE: function TITLE(list) {\n    return sortBy(list, 'title');\n  },\n  AUTHOR: function AUTHOR(list) {\n    return sortBy(list, 'author');\n  },\n  COMMENTS: function COMMENTS(list) {\n    return sortBy(list, 'num_comments').reverse();\n  },\n  POINTS: function POINTS(list) {\n    return sortBy(list, 'points').reverse();\n  }\n};\n\nvar updateSearchTopStoriesState = function updateSearchTopStoriesState(hits, page) {\n  return function (prevState) {\n    var searchKey = prevState.searchKey,\n        results = prevState.results;\n    var oldHits = results && results[searchKey] ? results[searchKey].hits : [];\n\n    var updatedHits = _toConsumableArray(oldHits).concat(_toConsumableArray(hits));\n\n    return {\n      results: _objectSpread({}, results, _defineProperty({}, searchKey, {\n        hits: updatedHits,\n        page: page\n      })),\n      isLoading: false\n    };\n  };\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this._isMounted = false;\n    _this.state = {\n      results: null,\n      searchKey: '',\n      searchTerm: DEFAULT_USER,\n      error: null,\n      isLoading: false,\n      sortKey: 'NONE',\n      isSortReverse: false\n    };\n    _this.needsToSearchTopStories = _this.needsToSearchTopStories.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setSearchTopStories = _this.setSearchTopStories.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchSearchTopStories = _this.fetchSearchTopStories.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSearchChange = _this.onSearchChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSearchSubmit = _this.onSearchSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDismiss = _this.onDismiss.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"needsToSearchTopStories\",\n    value: function needsToSearchTopStories(searchTerm) {\n      return !this.state.results[searchTerm];\n    }\n  }, {\n    key: \"setSearchTopStories\",\n    value: function setSearchTopStories(result) {\n      var hits = result.hits,\n          page = result.page;\n      this.setState(updateSearchTopStoriesState(hits, page));\n    }\n  }, {\n    key: \"fetchSearchTopStories\",\n    value: function fetchSearchTopStories(searchTerm) {\n      var _this2 = this;\n\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.setState({\n        isLoading: true\n      });\n      axios(\"\".concat(GET_USER_DATA)) // .then(result => this.setSearchTopStories(result.data))\n      .then(function (result) {\n        return console.log(result.data);\n      }).catch(function (error) {\n        return _this2._isMounted && _this2.setState({\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      var searchTerm = this.state.searchTerm;\n      this.setState({\n        searchKey: searchTerm\n      });\n      this.fetchSearchTopStories(searchTerm);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"onSearchChange\",\n    value: function onSearchChange(event) {\n      this.setState({\n        searchTerm: event.target.value\n      });\n    }\n  }, {\n    key: \"onSearchSubmit\",\n    value: function onSearchSubmit(event) {\n      var searchTerm = this.state.searchTerm;\n      this.setState({\n        searchKey: searchTerm\n      });\n\n      if (this.needsToSearchTopStories(searchTerm)) {\n        this.fetchSearchTopStories(searchTerm);\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"onDismiss\",\n    value: function onDismiss(id) {\n      var _this$state = this.state,\n          searchKey = _this$state.searchKey,\n          results = _this$state.results;\n      var _results$searchKey = results[searchKey],\n          hits = _results$searchKey.hits,\n          page = _results$searchKey.page;\n\n      var isNotId = function isNotId(item) {\n        return item.objectID !== id;\n      };\n\n      var updatedHits = hits.filter(isNotId);\n      this.setState({\n        results: _objectSpread({}, results, _defineProperty({}, searchKey, {\n          hits: updatedHits,\n          page: page\n        }))\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          searchTerm = _this$state2.searchTerm,\n          results = _this$state2.results,\n          searchKey = _this$state2.searchKey,\n          error = _this$state2.error,\n          isLoading = _this$state2.isLoading;\n      var page = results && results[searchKey] && results[searchKey].page || 0;\n      var list = results && results[searchKey] && results[searchKey].hits || [];\n      return React.createElement(\"div\", {\n        className: \"page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"interactions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Search, {\n        value: searchTerm,\n        onChange: this.onSearchChange,\n        onSubmit: this.onSearchSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Search\")), error ? React.createElement(\"div\", {\n        className: \"interactions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Something went wrong.\")) : React.createElement(Table, {\n        list: list,\n        onDismiss: this.onDismiss,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"interactions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(ButtonWithLoading, {\n        isLoading: isLoading,\n        onClick: function onClick() {\n          return _this3.fetchSearchTopStories(searchKey, page + 1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"More\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar Search = function Search(_ref) {\n  var value = _ref.value,\n      onChange = _ref.onChange,\n      onSubmit = _ref.onSubmit,\n      children = _ref.children;\n  return React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    value: value,\n    onChange: onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, children));\n};\n\nvar Table =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(Table, _Component2);\n\n  function Table(props) {\n    var _this4;\n\n    _classCallCheck(this, Table);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(Table).call(this, props));\n    _this4.state = {\n      sortKey: 'NONE',\n      isSortReverse: false\n    };\n    _this4.onSort = _this4.onSort.bind(_assertThisInitialized(_assertThisInitialized(_this4)));\n    return _this4;\n  }\n\n  _createClass(Table, [{\n    key: \"onSort\",\n    value: function onSort(sortKey) {\n      var isSortReverse = this.state.sortKey === sortKey && !this.state.isSortReverse;\n      this.setState({\n        sortKey: sortKey,\n        isSortReverse: isSortReverse\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          list = _this$props.list,\n          onDismiss = _this$props.onDismiss;\n      var _this$state3 = this.state,\n          sortKey = _this$state3.sortKey,\n          isSortReverse = _this$state3.isSortReverse;\n      var sortedList = SORTS[sortKey](list);\n      var reverseSortedList = isSortReverse ? sortedList.reverse() : sortedList;\n      return React.createElement(\"div\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"table-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          width: '40%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(Sort, {\n        sortKey: 'TITLE',\n        onSort: this.onSort,\n        activeSortKey: sortKey,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Title\")), React.createElement(\"span\", {\n        style: {\n          width: '30%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(Sort, {\n        sortKey: 'AUTHOR',\n        onSort: this.onSort,\n        activeSortKey: sortKey,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"Author\")), React.createElement(\"span\", {\n        style: {\n          width: '10%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(Sort, {\n        sortKey: 'COMMENTS',\n        onSort: this.onSort,\n        activeSortKey: sortKey,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Comments\")), React.createElement(\"span\", {\n        style: {\n          width: '10%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(Sort, {\n        sortKey: 'POINTS',\n        onSort: this.onSort,\n        activeSortKey: sortKey,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"Points\")), React.createElement(\"span\", {\n        style: {\n          width: '10%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"Archive\")), reverseSortedList.map(function (item) {\n        return React.createElement(\"div\", {\n          key: item.objectID,\n          className: \"table-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            width: '40%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: item.url,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }, item.title)), React.createElement(\"span\", {\n          style: {\n            width: '30%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, item.author), React.createElement(\"span\", {\n          style: {\n            width: '10%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, item.num_comments), React.createElement(\"span\", {\n          style: {\n            width: '10%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, item.points), React.createElement(\"span\", {\n          style: {\n            width: '10%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return onDismiss(item.objectID);\n          },\n          className: \"button-inline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, \"Dismiss\")));\n      }));\n    }\n  }]);\n\n  return Table;\n}(Component);\n\nvar Sort = function Sort(_ref2) {\n  var sortKey = _ref2.sortKey,\n      activeSortKey = _ref2.activeSortKey,\n      onSort = _ref2.onSort,\n      children = _ref2.children;\n  var sortClass = classNames('button-inline', {\n    'button-active': sortKey === activeSortKey\n  });\n  return React.createElement(Button, {\n    onClick: function onClick() {\n      return onSort(sortKey);\n    },\n    className: sortClass,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316\n    },\n    __self: this\n  }, children);\n};\n\nvar Button = function Button(_ref3) {\n  var onClick = _ref3.onClick,\n      _ref3$className = _ref3.className,\n      className = _ref3$className === void 0 ? '' : _ref3$className,\n      children = _ref3.children;\n  return React.createElement(\"button\", {\n    onClick: onClick,\n    className: className,\n    type: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330\n    },\n    __self: this\n  }, children);\n};\n\nvar Loading = function Loading() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339\n    },\n    __self: this\n  }, \"Loading ...\");\n};\n\nvar withLoading = function withLoading(Component) {\n  return function (_ref4) {\n    var isLoading = _ref4.isLoading,\n        rest = _objectWithoutProperties(_ref4, [\"isLoading\"]);\n\n    return isLoading ? React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }) : React.createElement(Component, Object.assign({}, rest, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }));\n  };\n};\n\nvar ButtonWithLoading = withLoading(Button);\nexport { Button, Search, Table };\nexport default App;","map":{"version":3,"sources":["/Users/aditioan/Documents/Goingmerry/hackernews-client/src/App.js"],"names":["React","Component","axios","sortBy","classNames","DEFAULT_USER","DEFAULT_HPP","GET_USER_DATA","PATH_SEARCH","PARAM_SEARCH","PARAM_PAGE","PARAM_HPP","SORTS","NONE","list","TITLE","AUTHOR","COMMENTS","reverse","POINTS","updateSearchTopStoriesState","hits","page","prevState","searchKey","results","oldHits","updatedHits","isLoading","App","props","_isMounted","state","searchTerm","error","sortKey","isSortReverse","needsToSearchTopStories","bind","setSearchTopStories","fetchSearchTopStories","onSearchChange","onSearchSubmit","onDismiss","result","setState","then","console","log","data","catch","event","target","value","preventDefault","id","isNotId","item","objectID","filter","Search","onChange","onSubmit","children","Table","onSort","sortedList","reverseSortedList","width","map","url","title","author","num_comments","points","Sort","activeSortKey","sortClass","Button","onClick","className","Loading","withLoading","rest","ButtonWithLoading"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { sortBy } from 'lodash';\nimport classNames from 'classnames';\nimport './App.css';\n\nconst DEFAULT_USER = 'jl';\nconst DEFAULT_HPP = '100';\n\nconst GET_USER_DATA = `https://hacker-news.firebaseio.com/v0/user/${DEFAULT_USER}.json`;\nconst PATH_SEARCH = '/search';\nconst PARAM_SEARCH = 'query=';\nconst PARAM_PAGE = 'page=';\nconst PARAM_HPP = 'hitsPerPage=';\n\nconst SORTS = {\n  NONE: list => list,\n  TITLE: list => sortBy(list, 'title'),\n  AUTHOR: list => sortBy(list, 'author'),\n  COMMENTS: list => sortBy(list, 'num_comments').reverse(),\n  POINTS: list => sortBy(list, 'points').reverse(),\n};\n\nconst updateSearchTopStoriesState = (hits, page) => (prevState) => {\n  const { searchKey, results } = prevState;\n\n  const oldHits = results && results[searchKey]\n    ? results[searchKey].hits\n    : [];\n\n  const updatedHits = [\n    ...oldHits,\n    ...hits\n  ];\n\n  return {\n    results: {\n      ...results,\n      [searchKey]: { hits: updatedHits, page }\n    },\n    isLoading: false\n  };\n};\n\nclass App extends Component {\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      results: null,\n      searchKey: '',\n      searchTerm: DEFAULT_USER,\n      error: null,\n      isLoading: false,\n      sortKey: 'NONE',\n      isSortReverse: false,\n    };\n\n    this.needsToSearchTopStories = this.needsToSearchTopStories.bind(this);\n    this.setSearchTopStories = this.setSearchTopStories.bind(this);\n    this.fetchSearchTopStories = this.fetchSearchTopStories.bind(this);\n    this.onSearchChange = this.onSearchChange.bind(this);\n    this.onSearchSubmit = this.onSearchSubmit.bind(this);\n    this.onDismiss = this.onDismiss.bind(this);\n  }\n\n  needsToSearchTopStories(searchTerm) {\n    return !this.state.results[searchTerm];\n  }\n\n  setSearchTopStories(result) {\n    const { hits, page } = result;\n    this.setState(updateSearchTopStoriesState(hits, page));\n  }\n\n  fetchSearchTopStories(searchTerm, page = 0) {\n    this.setState({ isLoading: true });\n\n    axios(`${GET_USER_DATA}`)\n      // .then(result => this.setSearchTopStories(result.data))\n      .then(result => console.log(result.data))\n      .catch(error => this._isMounted && this.setState({ error }));\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n    this.fetchSearchTopStories(searchTerm);\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  onSearchChange(event) {\n    this.setState({ searchTerm: event.target.value });\n  }\n\n  onSearchSubmit(event) {\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n\n    if (this.needsToSearchTopStories(searchTerm)) {\n      this.fetchSearchTopStories(searchTerm);\n    }\n\n    event.preventDefault();\n  }\n\n  onDismiss(id) {\n    const { searchKey, results } = this.state;\n    const { hits, page } = results[searchKey];\n\n    const isNotId = item => item.objectID !== id;\n    const updatedHits = hits.filter(isNotId);\n\n    this.setState({\n      results: {\n        ...results,\n        [searchKey]: { hits: updatedHits, page }\n      }\n    });\n  }\n\n  render() {\n    const {\n      searchTerm,\n      results,\n      searchKey,\n      error,\n      isLoading\n    } = this.state;\n\n    const page = (\n      results &&\n      results[searchKey] &&\n      results[searchKey].page\n    ) || 0;\n\n    const list = (\n      results &&\n      results[searchKey] &&\n      results[searchKey].hits\n    ) || [];\n\n    return (\n      <div className=\"page\">\n        <div className=\"interactions\">\n          <Search\n            value={searchTerm}\n            onChange={this.onSearchChange}\n            onSubmit={this.onSearchSubmit}\n          >\n            Search\n          </Search>\n        </div>\n        { error\n          ? <div className=\"interactions\">\n            <p>Something went wrong.</p>\n          </div>\n          : <Table\n            list={list}\n            onDismiss={this.onDismiss}\n          />\n        }\n        <div className=\"interactions\">\n          <ButtonWithLoading\n            isLoading={isLoading}\n            onClick={() => this.fetchSearchTopStories(searchKey, page + 1)}>\n            More\n          </ButtonWithLoading>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst Search = ({\n  value,\n  onChange,\n  onSubmit,\n  children\n}) =>\n  <form onSubmit={onSubmit}>\n    <input\n      type=\"text\"\n      value={value}\n      onChange={onChange}\n    />\n    <button type=\"submit\">\n      {children}\n    </button>\n  </form>\n\nclass Table extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      sortKey: 'NONE',\n      isSortReverse: false,\n    };\n\n    this.onSort = this.onSort.bind(this);\n  }\n\n  onSort(sortKey) {\n    const isSortReverse = this.state.sortKey === sortKey && !this.state.isSortReverse;\n    this.setState({ sortKey, isSortReverse });\n  }\n\n  render() {\n    const {\n      list,\n      onDismiss\n    } = this.props;\n\n    const {\n      sortKey,\n      isSortReverse,\n    } = this.state;\n\n    const sortedList = SORTS[sortKey](list);\n    const reverseSortedList = isSortReverse\n      ? sortedList.reverse()\n      : sortedList;\n\n    return (\n      <div className=\"table\">\n        <div className=\"table-header\">\n          <span style={{ width: '40%' }}>\n            <Sort\n              sortKey={'TITLE'}\n              onSort={this.onSort}\n              activeSortKey={sortKey}\n            >\n              Title\n            </Sort>\n          </span>\n          <span style={{ width: '30%' }}>\n            <Sort\n              sortKey={'AUTHOR'}\n              onSort={this.onSort}\n              activeSortKey={sortKey}\n            >\n              Author\n            </Sort>\n          </span>\n          <span style={{ width: '10%' }}>\n            <Sort\n              sortKey={'COMMENTS'}\n              onSort={this.onSort}\n              activeSortKey={sortKey}\n            >\n              Comments\n            </Sort>\n          </span>\n          <span style={{ width: '10%' }}>\n            <Sort\n              sortKey={'POINTS'}\n              onSort={this.onSort}\n              activeSortKey={sortKey}\n            >\n              Points\n            </Sort>\n          </span>\n          <span style={{ width: '10%' }}>\n            Archive\n          </span>\n        </div>\n        {reverseSortedList.map(item =>\n          <div key={item.objectID} className=\"table-row\">\n            <span style={{ width: '40%' }}>\n              <a href={item.url}>{item.title}</a>\n            </span>\n            <span style={{ width: '30%' }}>\n              {item.author}\n            </span>\n            <span style={{ width: '10%' }}>\n              {item.num_comments}\n            </span>\n            <span style={{ width: '10%' }}>\n              {item.points}\n            </span>\n            <span style={{ width: '10%' }}>\n              <Button\n                onClick={() => onDismiss(item.objectID)}\n                className=\"button-inline\"\n              >\n                Dismiss\n              </Button>\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst Sort = ({\n  sortKey,\n  activeSortKey,\n  onSort,\n  children\n}) => {\n  const sortClass = classNames(\n    'button-inline',\n    { 'button-active': sortKey === activeSortKey }\n  );\n\n  return (\n    <Button\n      onClick={() => onSort(sortKey)}\n      className={sortClass}\n    >\n      {children}\n    </Button>\n  );\n}\n\nconst Button = ({\n  onClick,\n  className = '',\n  children,\n}) =>\n  <button\n    onClick={onClick}\n    className={className}\n    type=\"button\"\n  >\n    {children}\n  </button>\n\nconst Loading = () =>\n  <div>Loading ...</div>\n\nconst withLoading = (Component) => ({ isLoading, ...rest }) =>\n  isLoading\n    ? <Loading />\n    : <Component { ...rest } />\n\nconst ButtonWithLoading = withLoading(Button);\n\nexport {\n  Button,\n  Search,\n  Table,\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}